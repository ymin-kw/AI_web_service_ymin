<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê¹”ë”í•œ íšŒì˜ë¡ ì‘ì„±ê¸°</title>
    <style>
        /* ê¹”ë”í•œ í™”ì´íŠ¸ í…Œë§ˆ ë””ìì¸ */
        :root {
            --primary-color: #007bff; /* íŒŒë€ìƒ‰ ê³„ì—´ (ê°•ì¡° ìƒ‰ìƒ) */
            --secondary-color: #28a745; /* ë…¹ìƒ‰ ê³„ì—´ (ë²„íŠ¼ ìƒ‰ìƒ) */
            --background-color: white; /* í°ìƒ‰ ë°°ê²½ */
            --text-color: #333333; /* ì–´ë‘ìš´ í…ìŠ¤íŠ¸ */
            --card-background: #f8f9fa; /* ì»´í¬ë„ŒíŠ¸ ë°°ê²½ (ì•½ê°„ íšŒìƒ‰) */
            --border-color: #ced4da; /* ê²½ê³„ì„  ìƒ‰ìƒ */
            --font-family: 'Malgun Gothic', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            font-family: var(--font-family);
            background-color: var(--background-color);
            color: var(--text-color);
            margin: 0;
            padding: 30px;
            line-height: 1.6;
            display: flex;
            justify-content: center;
        }

        .container {
            width: 100%;
            max-width: 900px;
        }

        h1 {
            color: var(--primary-color);
            text-align: center;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 15px;
            margin-top: 0;
            font-size: 2em;
        }

        /* ì…ë ¥ í¼ ì˜ì—­ ìŠ¤íƒ€ì¼ */
        #input-area {
            background-color: var(--card-background);
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px; /* ì¶œë ¥ ê³µê°„ê³¼ ë¶„ë¦¬ */
        }

        h2 {
            color: var(--primary-color);
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 5px;
            margin-top: 0;
        }

        .form-row {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .form-row > .form-group {
             flex: 1;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: var(--text-color);
        }

        input[type="text"],
        input[type="date"],
        input[type="time"],
        textarea {
            width: calc(100% - 20px);
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            background-color: white;
            color: var(--text-color);
            font-size: 1em;
            transition: border-color 0.3s;
        }

        input:focus, textarea:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
        }

        /* ì°¸ì„ì ë° ì•ˆê±´ ì¶”ê°€ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .add-button {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            margin-left: 10px;
            font-weight: bold;
            transition: background-color 0.3s;
        }

        .add-button:hover {
            background-color: #1e7e34;
        }

        #attendees-list, #agenda-list {
            margin-top: 10px;
            padding: 10px;
            background-color: #e9ecef;
            border-radius: 4px;
            border: 1px solid var(--border-color);
        }

        .list-item {
            background-color: #ffffff;
            color: var(--text-color);
            padding: 5px 10px;
            margin-bottom: 5px;
            border-radius: 3px;
            border: 1px solid #dee2e6;
            display: inline-block;
            margin-right: 5px;
        }
        
        /* ë“±ë¡ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        #register-btn {
            width: 100%;
            padding: 15px;
            background-color: var(--primary-color);
            color: white;
            font-size: 1.1em;
            font-weight: bold;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 20px;
            transition: background-color 0.3s, transform 0.1s;
        }

        #register-btn:hover {
            background-color: #0056b3;
        }

        /* ìƒíƒœ/ê²°ê³¼ ì˜ì—­ ìŠ¤íƒ€ì¼ (ì•„ë˜ì— ë„“ê²Œ ë°°ì¹˜) */
        #output-area {
            background-color: var(--card-background);
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        #output-area h2 {
            color: var(--primary-color);
        }

        #status-message {
            margin-top: 15px;
            padding: 15px;
            border-radius: 4px;
            background-color: #3d1881; /* ê²½ê³  ìƒ‰ìƒ */
            color: #856404;
            font-weight: bold;
            min-height: 20px;
            border: 1px solid #ffeeba;
        }

        /* ë³µì‚¬í•˜ê¸° ì‰¬ìš´ ë„“ì€ ì¶œë ¥ ê³µê°„ */
        #result-content {
            white-space: pre-wrap;
            background-color: #ffffff; /* ì¶œë ¥ ê³µê°„ì€ ìˆœìˆ˜ í°ìƒ‰ */
            padding: 20px;
            border-radius: 4px;
            border: 2px solid #6c757d; /* ì§™ì€ ê²½ê³„ì„  */
            margin-top: 15px;
            min-height: 400px; /* ë„“ì€ ë†’ì´ í™•ë³´ */
            overflow-y: auto;
            font-family: Consolas, monospace;
            font-size: 0.95em;
            line-height: 1.5;
            cursor: text; /* í…ìŠ¤íŠ¸ ì„ íƒ ê°€ëŠ¥í•˜ë„ë¡ */
        }

    </style>
</head>
<body>

    <div class="container">
        <h1>ğŸ“‘ ê¹”ë”í•œ íšŒì˜ë¡ ì‘ì„± ë° ì „ì†¡ ì‹œìŠ¤í…œ</h1>

        <div id="input-area">
            <h2>íšŒì˜ ì •ë³´ ì…ë ¥</h2>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="meeting-date">íšŒì˜ ì¼ì‹œ</label>
                    <input type="date" id="meeting-date" required>
                </div>
                <div class="form-group">
                    <label for="meeting-location">íšŒì˜ ì¥ì†Œ</label>
                    <input type="text" id="meeting-location" placeholder="ì˜ˆ: ê´‘ìš´ëŒ€ ìƒˆë¹›ê´€ 405í˜¸" required>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="start-time">íšŒì˜ ì‹œì‘ ì‹œê°„</label>
                    <input type="time" id="start-time" required>
                </div>
                <div class="form-group">
                    <label for="end-time">íšŒì˜ ì¢…ë£Œ ì‹œê°„</label>
                    <input type="time" id="end-time" required>
                </div>
            </div>

            <div class="form-group">
                <label for="attendee-input">íšŒì˜ ì°¸ì„ì</label>
                <input type="text" id="attendee-input" placeholder="ì°¸ì„ì ì´ë¦„ ì…ë ¥">
                <button type="button" class="add-button" onclick="addAttendee()">ì¶”ê°€</button>
                <div id="attendees-list"></div>
            </div>

            <div class="form-group">
                <label for="agenda-input">íšŒì˜ ë‚´ìš©/ì•ˆê±´</label>
                <textarea id="agenda-input" rows="4" placeholder="ì•ˆê±´ ë‚´ìš© ë° ê²°ì • ì‚¬í•­ì„ ì…ë ¥í•˜ì„¸ìš”."></textarea>
                <button type="button" class="add-button" onclick="addAgenda()">ì•ˆê±´ ì¶”ê°€</button>
                <div id="agenda-list"></div>
            </div>

            <button type="button" id="register-btn" onclick="register()">íšŒì˜ë¡ ì „ì†¡ ë° ë°ì´í„° êµ¬ì„±</button>
        </div>

        <div id="output-area">
            <h2>ì¶œë ¥ ê²°ê³¼ (Word ë¬¸ì„œ ë³µì‚¬ìš©)</h2>
            <div id="status-message">ì „ì†¡ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ êµ¬ì„±ëœ JSON ë°ì´í„°ì™€ Word ë³µì‚¬ë³¸ì´ ì´ ì˜ì—­ì— í‘œì‹œë©ë‹ˆë‹¤.</div>
            
            <p><strong>JSON êµ¬ì„± ë°ì´í„°:</strong></p>
            <pre id="json-content" style="background-color: #f0f0f0; border: 1px dashed #aaa; padding: 15px; margin-bottom: 20px;"></pre>

            <p><strong>Word ë¬¸ì„œ ë³µì‚¬ìš© í…ìŠ¤íŠ¸ (Ctrl+A, Ctrl+Cë¡œ ì „ì²´ ë³µì‚¬ ê°€ëŠ¥):</strong></p>
            <pre id="result-content" tabindex="0"></pre>
        </div>
    </div>

    <script>
        //  í•µì‹¬ ìš”êµ¬ ì‚¬í•­ 1: API ì„œë²„ ì£¼ì†Œ ìƒìˆ˜ ì •ì˜
        const SERVER_URL = 'https://9a809f96-16c8-4e98-b263-a895e4033d05-00-1115s3je3tzzn.pike.replit.dev'; 

        let attendees = [];
        let agendas = [];

        function addAttendee() {
            const input = document.getElementById('attendee-input');
            const name = input.value.trim();

            if (name && !attendees.includes(name)) {
                attendees.push(name);
                input.value = '';
                renderAttendees();
            } else if (name) {
                alert('ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì°¸ì„ìì…ë‹ˆë‹¤.');
            }
        }

        function renderAttendees() {
            const listDiv = document.getElementById('attendees-list');
            listDiv.innerHTML = attendees.map(att => 
                `<span class="list-item">${att}</span>`
            ).join('');
        }

        function addAgenda() {
            const input = document.getElementById('agenda-input');
            const content = input.value.trim();

            if (content) {
                agendas.push(content);
                input.value = '';
                renderAgendas();
            }
        }

        function renderAgendas() {
            const listDiv = document.getElementById('agenda-list');
            // ì•ˆê±´ ëª©ë¡ì„ ê°„ë‹¨í•˜ê²Œ í‘œì‹œ
            listDiv.innerHTML = agendas.map((agenda, index) => 
                `<span class="list-item">ì•ˆê±´ ${index + 1} (${agenda.substring(0, 15)}...)</span>`
            ).join('');
        }

        /**
         * íšŒì˜ë¡ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ì—¬ ì„œë²„ë¡œ ì „ì†¡í•˜ê³ , ì¶œë ¥ ê³µê°„ì— ë³µì‚¬í•˜ê¸° ì¢‹ì€ í˜•íƒœë¡œ ì¶œë ¥í•©ë‹ˆë‹¤.
         */
        function register() {
            const date = document.getElementById('meeting-date').value;
            const startTime = document.getElementById('start-time').value;
            const endTime = document.getElementById('end-time').value;
            const location = document.getElementById('meeting-location').value;
            const statusMessage = document.getElementById('status-message');
            const jsonContent = document.getElementById('json-content');
            const resultContent = document.getElementById('result-content');

            // í•„ìˆ˜ ì…ë ¥ í•„ë“œ í™•ì¸
            if (!date || !startTime || !endTime || !location || attendees.length === 0 || agendas.length === 0) {
                statusMessage.textContent = 'ì˜¤ë¥˜: ëª¨ë“  í•„ìˆ˜ ì •ë³´ë¥¼ ì…ë ¥í•˜ê³  ì°¸ì„ì ë° ì•ˆê±´ì„ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤.';
                return;
            }

            // =========================================================================
            // 1. API ì „ì†¡ìš© JSON ë°ì´í„° êµ¬ì„±
            // =========================================================================
            const meetingData = {
                date: date,
                start_time: startTime,
                end_time: endTime,
                duration: calculateDuration(startTime, endTime), // íšŒì˜ ì‹œê°„ ê³„ì‚°
                location: location,
                attendees: attendees,
                agendas: agendas.map((content, index) => ({
                    id: index + 1,
                    content: content,
                    status: "Completed" 
                }))
            };

            // JSON ë°ì´í„°ë¥¼ ê²°ê³¼ ì˜ì—­ì— ì¶œë ¥
            jsonContent.textContent = JSON.stringify(meetingData, null, 2);


            // =========================================================================
            // 2. Word ë¬¸ì„œ ë³µì‚¬ìš© í…ìŠ¤íŠ¸ êµ¬ì„±
            // =========================================================================
            const wordText = createWordDocumentText(date, startTime, endTime, location, attendees, agendas);
            resultContent.textContent = wordText;
            
            statusMessage.textContent = 'ë°ì´í„° êµ¬ì„± ì™„ë£Œ. ì•„ë˜ ì¶œë ¥ ê³µê°„ì˜ ë‚´ìš©ì„ ë³µì‚¬í•˜ì—¬ ì›Œë“œ ë¬¸ì„œì— ë¶™ì—¬ë„£ìœ¼ì„¸ìš”. ì„œë²„ ì „ì†¡ì„ ì‹œë„í•©ë‹ˆë‹¤...';


            // =========================================================================
            // 3. fetch í•¨ìˆ˜ë¥¼ ì´ìš©í•œ POST í†µì‹  ë¡œì§ (í•µì‹¬ ìš”êµ¬ ì‚¬í•­)
            // =========================================================================
            fetch(SERVER_URL, {
                method: 'POST', // í†µì‹  ë°©ì‹: method: 'POST'
                headers: {
                    'Content-Type': 'application/json',
                },
                // JSON ë°ì´í„°: ì…ë ¥ í•„ë“œì˜ ë°ì´í„°ë¥¼ ëª¨ì•„ JSON í˜•íƒœë¡œ ì„œë²„ì— ì „ì†¡
                body: JSON.stringify(meetingData), 
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP ì˜¤ë¥˜! ìƒíƒœ: ${response.status}`);
                }
                return response.json();
            })
            .then(data => {
                statusMessage.textContent = `ğŸ‰ íšŒì˜ë¡ ë“±ë¡ ì„±ê³µ! ì„œë²„ ì‘ë‹µ: ${JSON.stringify(data).substring(0, 50)}...`;
            })
            .catch(error => {
                // SERVER_URLì´ ë¹„ì–´ìˆìœ¼ë¯€ë¡œ, í†µì‹ ì€ ì—¬ê¸°ì„œ ì˜¤ë¥˜ë¥¼ ë°˜í™˜
                console.error('API í†µì‹  ì˜¤ë¥˜:', error);
                statusMessage.textContent += ` âŒ API í†µì‹  ì˜¤ë¥˜ ë°œìƒ. (SERVER_URLì´ ë¹„ì–´ìˆê±°ë‚˜, ì„œë²„ ì—°ê²° ì‹¤íŒ¨) - ${error.message}`;
            });
            // ì¶œë ¥ ê³µê°„ìœ¼ë¡œ ìŠ¤í¬ë¡¤ ì´ë™
            resultContent.focus(); 
        }

        /**
         * ì‹œì‘ ì‹œê°„ê³¼ ì¢…ë£Œ ì‹œê°„ì˜ ì°¨ì´ë¥¼ ê³„ì‚°í•˜ì—¬ ë°˜í™˜í•©ë‹ˆë‹¤.
         */
        function calculateDuration(start, end) {
            const startParts = start.split(':').map(Number);
            const endParts = end.split(':').map(Number);

            const startMinutes = startParts[0] * 60 + startParts[1];
            const endMinutes = endParts[0] * 60 + endParts[1];

            let diffMinutes = endMinutes - startMinutes;
            if (diffMinutes < 0) {
                 // ìì •ì„ ë„˜ì–´ê°„ ê²½ìš° (ë‹¨ìˆœí™”ë¥¼ ìœ„í•´ ì¼ë‹¨ í•˜ë£¨ ì•ˆìœ¼ë¡œ ê°€ì •)
                 diffMinutes += 24 * 60;
            }

            const hours = Math.floor(diffMinutes / 60);
            const minutes = diffMinutes % 60;

            return `${hours}ì‹œê°„ ${minutes}ë¶„`;
        }

        /**
         * Word ë¬¸ì„œì— ë³µì‚¬í•˜ê¸° ì¢‹ì€ í˜•ì‹ì˜ í…ìŠ¤íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
         */
        function createWordDocumentText(date, start, end, location, attendees, agendas) {
            let text = "";
            text += "========================================================\n";
            text += "                 íšŒì˜ë¡ (Meeting Minutes)               \n";
            text += "========================================================\n\n";

            text += "1. íšŒì˜ ê°œìš”\n";
            text += "--------------------------------------------------------\n";
            text += `* ì¼ì‹œ: ${date} \n`;
            text += `* ì‹œê°„: ${start} ~ ${end} (${calculateDuration(start, end)})\n`;
            text += `* ì¥ì†Œ: ${location}\n`;
            text += `* ì°¸ì„ì: ${attendees.join(', ')}\n\n`;

            text += "2. íšŒì˜ ë‚´ìš© ë° ê²°ì • ì‚¬í•­\n";
            text += "--------------------------------------------------------\n";
            
            agendas.forEach((agenda, index) => {
                text += `\n[ì•ˆê±´ ${index + 1}]\n`;
                text += `  - ë‚´ìš©: ${agenda}\n`;
                text += `  - ê²°ì •ì‚¬í•­/ê²°ê³¼: (ê²°ê³¼ë¥¼ ìˆ˜ë™ìœ¼ë¡œ ì…ë ¥í•˜ì„¸ìš”.)\n`;
                text += `  - ë‹´ë‹¹ì: \n`;
                text += `  - ë§ˆê°ì¼: \n`;
            });

            text += "\n========================================================\n";
            text += "ì‘ì„±ì¼: " + new Date().toLocaleDateString('ko-KR');
            
            return text;
        }


        // ì´ˆê¸° ë Œë”ë§ ë° ê¸°ë³¸ê°’ ì„¤ì •
        document.addEventListener('DOMContentLoaded', () => {
            renderAttendees();
            renderAgendas();
            
            const now = new Date();
            const dateStr = now.toISOString().substring(0, 10);
            document.getElementById('meeting-date').value = dateStr;

            // ê¸°ë³¸ ì‹œê°„ ì„¤ì • (ì˜ˆì‹œë¡œ 10ì‹œë¶€í„° 11ì‹œ 30ë¶„)
            document.getElementById('start-time').value = '10:00';
            document.getElementById('end-time').value = '11:30';
        });

    </script>
</body>

</html>

